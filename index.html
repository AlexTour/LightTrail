<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <title>VR Painting in 360</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <a-scene>
        <!-- 360 Image Background -->
        <a-sky src="your-360-image.jpg" rotation="0 -130 0"></a-sky>

        <!-- Controller for Painting -->
        <a-entity id="controller" laser-controls="hand: right" paint-controls></a-entity>

        <!-- Canvas for Painting -->
        <a-entity id="canvas" paint-canvas></a-entity>

        <!-- Camera and Rig -->
        <a-entity id="cameraRig" position="0 1.6 0">
            <a-camera wasd-controls look-controls></a-camera>
        </a-entity>
    </a-scene>

    <script>
        AFRAME.registerComponent('paint-controls', {
            init: function () {
                const el = this.el;
                const canvas = document.getElementById('canvas');

                el.addEventListener('triggerdown', function () {
                    canvas.emit('startpaint');
                });

                el.addEventListener('triggerup', function () {
                    canvas.emit('stoppaint');
                });
            }
        });

        AFRAME.registerComponent('paint-canvas', {
            init: function () {
                const el = this.el;
                let isPainting = false;

                el.addEventListener('startpaint', function () {
                    isPainting = true;
                });

                el.addEventListener('stoppaint', function () {
                    isPainting = false;
                });

                el.addEventListener('mousedown', function (event) {
                    if (isPainting) {
                        const paintDot = document.createElement('a-sphere');
                        paintDot.setAttribute('color', 'blue');
                        paintDot.setAttribute('radius', '0.05');
                        paintDot.setAttribute('position', event.detail.intersection.point);
                        el.appendChild(paintDot);
                    }
                });
            }
        });
    </script>
</body>
</html>
